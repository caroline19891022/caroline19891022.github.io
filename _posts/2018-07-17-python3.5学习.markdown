---
layout: post
title:  "python3.5学习"  
date:   2018-07-17 21:23:54 +0800
tags: [python]
---


# 基础

## 数据类型

Python 3 中有 6 种标准的数据类型：Number, String, List, Tuple, Sets, Dictionary。

其中 Number 类型有 3 种：整型 int，浮点型 float，复数 complex。

### 整型 int

整型没有限制大小，可以当作 long 类型使用。  

在整数除法中，`/`的结果是浮点型，`//`的结果才是整型，相当于 Java 中的除，在 Python 中叫「地板除」。  

### 浮点型 float

浮点型参与的任何计算结果都是浮点型，包括除、余、地板除。  

### 复数 complex

复数由实数部分和虚数部分构成，可以用 a+bj 或 complex(a,b) 表示，复数的实部 a 和虚部 b 都是浮点型。

### 数据类型转换

* `int(x)` 将 x 转换为整型

  如果 x 为浮点，则简单粗暴地削去其小数部分

* `float(x)` 将 x 转换为浮点型

* `complex(x)` 将 x 转换为复数，虚数部分为 0。

* `complex(x, y)` 将 x 和 y 转换为复数。

### 常量

* PI:圆周率
* E:自然对数

## 变量和关键字

### 变量

命名变量：  

```python
# 命名无需定义类型
name = 'SunXiaoHong'
# 可以给同一个变量赋不同类型的值
name = 14
name = 2.14
# 获取变量的类型
type(name)
# 输出<class 'float'>
```

当将一个变量赋给另一个变量时，事实上是将它所指的值的地址给了这个变量。  

```python
a = 'ABC'
b = a
a = 'EFG'
print(b)
# 输出：ABC
```



### 变量名称

变量名称必须以字母开头，建议使用小写字母开头。  

Python 使用下划线式命名。  

不能使用关键字命名。  

> False	None	True	and		as	assert
break	class	continue	def	del
elif	else	except	finally	for	from
global	if	import	in	nonlocal
lambda	is	not	or	pass	raise
return	try	while	with	yield	



## 运算符和操作对象  

### 运算符

Python 支持以下 7 种运算符：

1. 算术运算符
2. 比较运算符
3. 赋值运算符
4. 逻辑运算符
5. 位运算符
6. 成员运算符
7. 身份运算符

#### 算术运算符

| 运算符 | 描述   | 实例                 |
| ------ | ------ | -------------------- |
| +      | 加     | a+b=15               |
| -      | 减     | a-b=5                |
| *      | 乘     | a*b=50               |
| /      | 除     | a/b=2.0              |
| %      | 模     | a%b=0                |
| **     | 幂     | a**b=100000          |
| //     | 地板除 | 9//2=4  9.0//2.0=4.0 |

#### 比较运算符

| 运算符 | 描述     | 实例            |
| ------ | -------- | --------------- |
| ==     | 等于     | a==b 返回 False |
| !=     | 不等于   | a!=b 返回 True  |
| >      | 大于     |                 |
| <      | 小于     |                 |
| \>=    | 大于等于 |                 |
| <=     | 小于等于 |                 |

#### 赋值运算符



| 运算符 | 实例       |
| ------ | ---------- |
| =      |            |
| +=     | c = c + a  |
| -=     | c = c - a  |
| *=     | c = c * a  |
| /=     | c = c / a  |
| %=     | c = c % a  |
| **=    | c = c ** a |
| //=    | c = c // a |



#### 位运算符

* & 按位与：

  1001 & 1100 得 1000  

* | 按位或：

  1001 | 1100 得 1101

* ^ 按位异或（相异取 1）：

  1001 ^ 1100 得 0101

* ~ 按位取反：

  ~1001 得 0110

* << 左移（高位丢弃，低位补 0）：

  1001 << 2 得 0100

* \>> 右移（低位丢弃，高位补0）：

  1001 >> 2 得 0010

#### 逻辑运算符  

在python中，任何对象都可以用```bool(对象)```的方式来进行判断，只有以下情况结果为false:
0，None，空字符串，空集合，false布尔值。  

| 运算符 | 逻辑表达式 | 描述                                     | 实例（a = 10, b = 20） |
| ------ | ---------- | ---------------------------------------- | ---------------------- |
| and    | x and y    | x 为 False 则返回 False; 否则返回 y 的值 | a and b 得 20          |
| or     | x or y     | x 为 True 则返回 x 的值；否则返回 y 的值 | a or b 得 10           |
| not    | not x      | 即 ! ，只返回 True 和 False              | not(a and b) 得 False  |

#### 成员运算符

| 运算符 | 描述                          |
| ------ | ----------------------------- |
| in     | 即 Java 的 List 中的 contains |
| not in | in 取反                       |

#### 身份运算符

| 运算符 | 描述                 |
| ------ | -------------------- |
| is     | 是否引用自同一个对象 |
| is not | is 取反              |

```python
a = 10
b = 10
print(a is b)
# True
```

#### 运算符优先级

从高到低：  

`**`

`~`  `+`(位运算)  `-`（位运算）    

`*`  `/`   `%`   `//`  

`+`  `-`  

`>>`  `<<`  

`&`  

`^`  `|`  

`<=`  `<`  `>`  `>=`  

`<>`  `==`  `!=`  

`=`  `%=`  `/=`  `//=`  `-=`  `+=`  `*=`  `**=`  

`is`  `is not`  

`in`  `not in`  

`not`  `or`  `and`  

## 字符串操作

字符串不能进行除法和减法；  

乘法只可以乘以数字；

```python
print('world'*3)
# 输出:worldworldworld
```

# 列表和元组  

## 通用序列操作

Python 中所有序列都可以进行一些特定操作，包括索引、分片、序列相加、乘法、成员资格、长度、最小值和最大值。    

Python 中的序列包括字符串、元组和列表。

### 索引

可以通过中括号的方式来获取相应索引对应的值。  

字符串即是用字符组成的序列。  

使用负值索引可以从右向左获取，最右的索引为-1。  

```python
test = 'abcdefg'
print(test[0]) #a
print(test[2]) #c
print(test[-1]) #g
print(test[-5]) #c
print(test[7])  #IndexError
```

### 分片

使用分片对一定范围内的元素进行访问。  

```python
test = 'abcdefg'
print(test[1:3]) #bc
print(test[-3:-1]) #ef
print(test[-3:3]) #不会报错，得到一个空字符串
print(test[-1:-3]) #空串
print(test[1:]) #bcdefg
print(test[-2:]) #fg
print(test[:3]) #abc
number = [0,1,2,3,4,5,6,7,8,9]
print(number[:]) #[0, 1, 2, 3, 4, 5, 6, 7, 8, 9]
```

* 包左不包右
* 左留空则从第一个元素开始输出，右留空则输出至最后一个元素

分片中有一个隐式参数即步长，默认为1

```python
print(number[1:8:1]) #[1, 2, 3, 4, 5, 6, 7]
print(number[1:8:2]) #[1, 3, 5, 7]
print(number[::3]) #[0, 3, 6, 9]
print(number[3:1]) #[]
print(number[3:1:-1]) #[3, 2]
```

* 步长 > 0 时，只能从左边的元素向右边的元素输出；
* 步长 < 0 时，只能从右边的元素向左边的元素输出；
* 步长 = 0 则会报错。

### 序列相加

同类型的序列可以用加号组合成一个序列。

```python
print([5,3,7] + [4,5,8]) #[5, 3, 7, 4, 5, 8]
print("aaa" + "bbb") #aaabbb
print([1,2] + '12') #报错
```

### 乘法

复制 N 份原序列的元素，放入一个大的序列中。

```python
print('a' * 5) #aaaaa
print([1, 2] * 5) #[1, 2, 1, 2, 1, 2, 1, 2, 1, 2]
print([None] * 5) #[None, None, None, None, None] 用于初始化序列
print([1] * 0) #[]
```

### 成员资格

相当于 contains。  

```python
greeting = 'hello, world3'
print('w' in greeting) #True
print(',' in greeting) #True
print(" " in greeting) #True
users = ['Jim', 'Lily', 'John']
print('Jim' in users) #True
print('J' in users) #False
numbers = [1, 5, 7, 10]
print(1 in numbers) #True
print('1' in numbers) #False
print(3 in users) #False
print(3 in greeting) #报错
```

| in 操作 | 字符串 | 列表 |
| ------- | ------ | ---- |
| 数字    | 报错   | OK   |
| 字符    | OK     | OK   |

### 长度、最小值、最大值

```python
print(len(greeting)) #13
print(max(greeting)) #w
print(min(greeting)) #（空格）
print(len(users)) #3
print(max(users)) # Lily
print(min(users)) # Jim
numbers = [1, 5, 7, 10, 'aa']
print(max(numbers)) #报错
print(min(numbers)) #报错
```

字符串的大小比较方法：先比较两个对象的第0个元素，大小关系即为对象的大小关系，如果相等则继续比较后续元素，先终止迭代的认为是小的。 

## 列表

### 更新列表

#### 元素赋值

numbers[2] = 28  

不可越界赋值。  

#### 增加元素

numbers.append(28)  

添加到列表末尾。  

#### 删除元素

del numbers[2]  

会导致列表长度缩短。该角标后还有元素的话，会向前缩进。  

#### 分片赋值

`list()`函数可将字符串转为字符列表。  

用前面说到的分片的语法，可将对应的分片进行赋值。但无法使用步长。  

```python
letters = list('Shitbow is a SB')
letters[-2:] = list('lovely boy')
print(letters) #['S', 'h', 'i', 't', 'b', 'o', 'w', ' ', 'i', 's', ' ', 'a', ' ', 'l', 'o', 'v', 'e', 'l', 'y', ' ', 'b', 'o', 'y']
aaa = list('abcd')
aaa[-2:] = []
print(aaa) #['a', 'b'] 相当于分片删除
```

### 嵌套列表

列表中的元素本身也可以是个列表。  

### 列表方法

* append

  list.append(元素)

  追加

* count

  list.count(元素)

  统计某元素出现次数

* extend

  a_list.extend(b_list)

  扩展列表。

  与 + 的区别：改变了 a_list 本身

* index

  list.index(元素)

  获取列表中的第一个匹配该元素的索引。若该元素不存在，则会报错。  

* insert

  list.insert(索引, 元素)

  在列表中对应的索引位置插入元素

* pop

  list.pop([索引])

  移除列表中对应索引（默认为最后一个）的元素，并返回改元素

* remove

  list.remove(元素)

  移除列表中某个值的第一个匹配项。没有返回值。若该元素不存在，则报错。

* reverse

  list.reverse()

  反转，改变原列表

* reversed

  reversed(list)

  反转，不改变原列表，返回一个新的迭代器对象。  

  ```python
  list1 = [1,2,3]
  list2 = reversed(list1)
  print(list1) #[1, 2, 3]
  print(list(list2)) #[3, 2, 1]
  ```

* sort

  list.sort([func])

  排序。可选择默认排序或指定排序。会改变原列表。  

  ```python
  words = ['study','python','is','happy']
  words_copy = words.copy()
  words.sort()
  print(words) # ['happy', 'is', 'python', 'study']
  words_copy.sort(key=len, reverse=False)
  print(words_copy) # ['is', 'study', 'happy', 'python']
  ```

* sorted

  sorted(list, [func])

  排序。可指定排序方式。不改变原列表，并返回一个新的列表。  

  ```python
  words = ['study','python','is','happy']
  words_sort = sorted(words, key=len)
  print(words) #['study', 'python', 'is', 'happy']
  print(words_sort) #['is', 'study', 'happy', 'python']
  ```

* clear

  list.clear()

  清空列表，长度变为0。  

* copy

  list.copy()

  复制一个新的列表。

## 元组

元组与列表类似，不同之处在于元组的元素不能被修改。用逗号分隔的元素自动被创建为元组。  

```python
name = 'aa', 'bb', 1
print(type(name)) #<class 'tuple'>
empty = (1)
print(type(empty)) #<class 'int'>
print(empty) #1
empty = (1,)
print(type(empty)) #<class 'tuple'>
print(empty) #(1,)
```

### tuple 函数

将序列转成元组。  

tuple = tuple(list)  

### 元组的基本操作

#### 访问元组

`tuple[index]` 可访问该角标的元组元素。  

并可以使用分片的语法，与 list 相同。

#### 修改元组

元素值不允许被修改，但可以进行元组连接组合操作。  

```python
name = 'aa', 'bb', 1
single = (1,)
print(name + single) #('aa', 'bb', 1, 1)
```

#### 删除元组

元组中的元素值不允许被删除，但可以删除整个元组。

```python
del single
print(single) #NameError: name 'single' is not defined
```

### 元组内置函数

* len(tuple)
* max(tuple)
* min(tuple)
* tuple(list)

## 列表与元组的区别

列表可变，元组不可变。因此能使用元组的时候尽量使用元组。  

如果一个元组中包含一个列表，则列表的变化是可以的，因为指向列表的地址未变。

# 字符串

## 字符串的基本操作

由于字符串是不可变的，因此无法分片赋值。  

## 字符串格式化

### 字符串格式化符号

| 符号 | 描述                                                         |
| ---- | ------------------------------------------------------------ |
| %c   | 格式化字符及其 ASCII 码                                      |
| %s   | 格式化字符串                                                 |
| %d   | 格式化整数                                                   |
| %u   | 格式化无符号整形                                             |
| %o   | 格式化无符号八进制数                                         |
| %x   | 格式化无符号十六进制数                                       |
| %X   | 格式化无符号十六进制数（大写）                               |
| %f   | 格式化浮点数字，可指定精度值，默认 6 位                      |
| %e   | 用科学计数法格式化浮点数                                     |
| %E   | 作用同%e                                                     |
| %g   | 在保证六位有效数字的前提下，使用小数方式，否则使用科学计数法。 |
| %G   | 作用同%g                                                     |
| %p   | 用十六进制数格式化变量的地址                                 |

```python
print('小智今年%s岁了'% 10) #小智今年10岁了
print('小智今年%d岁了'% 10) #小智今年10岁了
print('小智今年%f岁了'% 10) #小智今年10.000000岁了
print('小智今年%u岁了'% 10) #小智今年10岁了
print('小智今年%e岁了'% 10) #小智今年1.000000e+01岁了
print('小智今年%E岁了'% 10) #小智今年1.000000E+01岁了
print('小智今年%g岁了'% 10) #小智今年10岁了
print('小智今年%G岁了'% 10) #小智今年10岁了
```

说明（优先级按顺序）：

1. %

   标记转换说明符的开始

2. 转换标志（可选）

   `-`表示对齐；

   `+` 表示加上正负号；

   ` `表示正数之前保留空格；

   `0`表示转换值位数不够时用 0 填充。

3. 最小字段宽度（可选）

   转换后的字符串至少应该具有该宽度。如果是 *，宽度会从值元组中读出。

4. 精度值（可选）

   `.精度值`

   如果转换的是实数，精度值表示出现在小数点后的位数

   如果转换的是字符串，该数字就表示最大字段宽度

   如果是 *,精度从元组中读出

5. 转换类型，见上表。

```python
print('第一名是%-s，得分%+d；第二名是%s，得分% d；第三名是%s，得分%0f'%('甲', 91, '乙', 37, '丙', 21.1))
#第一名是甲，得分+91；第二名是乙，得分 37；第三名是丙，得分21.100000
print('第一名是%-5s，得分%+*d；第二名是%s，得分% 10.3f；第三名是%s，得分%0.*f'%('甲',5, 91, '乙', 37, '丙',2, 21.1))
#第一名是甲    ，得分  +91；第二名是乙，得分    37.000；第三名是丙，得分21.10
```





当既要格式化字符串，又要输出百分号时，要在需输出的百分号前再加一个百分号。  

```python
print('法国的控球时间占了%.2f %%'% 54.7897) #法国的控球时间占了54.79 %
```

### 字符串格式化元组

当原字符串中有多个参数需要被格式化时，右参数得是个元组，且元组中得有足够的参数填入字符串，否则会报错。  

```python
sentence = '第一名是%s，得分%d；第二名是%s，得分%d。'
print(sentence%('甲', 91, '乙', 37)) #第一名是甲，得分91；第二名是乙，得分37。
print(sentence%'甲', 91, '乙', 37) #TypeError: not enough arguments for format string
print(sentence%('甲', 91, '乙')) #TypeError: not enough arguments for format string
```

## 字符串方法

### find()

用于检测字符串中是否包含某子字符串。  

`index = original_str.find(child_str, beg=开始角标,end=结束角标)`

没有找到则返回 -1。查找角标包左不包右

```python
str = '012345'
print(str.find('4', 0, 4)) #-1
```

### join()

将字符串序列中的元素以指定字符连接成一个新的字符串。  

`str.join(sequence)`  

```python
str = '012345'
print(str.join(',')) #,
print(','.join(str)) #0,1,2,3,4,5
dirs = '','home','data','hdfs'
print('路径为：', '/'.join(dirs)) #路径为： /home/data/hdfs
```

join 操作的调用和被调用对象都应是字符串或字符序列。  

### lower()

把字符串中所有大写字母转成小写。不改变原对象。  

`str.lower()`

### upper()

同上，转成大写。

### swapcase()

大小写互转。

### replace()

把字符串中的 old 替换成 new，如果指定 max，则替换次数不超过 max。不改变原对象。   

`str.replace(old, new[, max])`

### split()

通过指定分隔符对字符串进行切片，如果指定 num，则最多只分隔成 num 个子字符串，返回一个 list。  

`str.split(st=' ', num=string.count(str))`

默认用空格分隔，能分隔几个就分隔几个。  

### strip()

移除字符串头尾指定字符，默认是空格。  

`str.strip([chars])`  

### translate()

用指定的表转换字符串的字符。  

`str.translate(table)`  

```python
intab = 'abcde'
outtab = 'ABCDE'
trantab = str.maketrans(intab,outtab)
print(type(trantab)) #<class 'dict'>
original = 'hello world'
print(original.translate(trantab), ',', original) #hEllo worlD , hello world
```



# 字典

字典是 Python 中唯一内建的映射类型，字典指定值没有特殊顺序，都存储在一个特殊的键里，键可以是**数字、字符串、元组**。  

## 创建和使用字典

创建：  

```python
d = {key1:value1,key2:value2}
# 空字典
d = {}
```

键必须是唯一的。  

键必须是不可变的——数字、字符串、元组。  

None 可以为键。  

### dict

可以用 dict 函数，通过其他映射 （如其他字典）或键值序列对建立字典。  

```python
student = [['name','甲'],['score', 68]]
detail = dict(student)
print(detail) #{'name': '甲', 'score': 68}
print(detail['name']) #甲

detail = dict(name = '乙', score = 55)
print(detail) #{'name': '乙', 'score': 55}
print(detail['score']) #55
```

### 字典的基本操作

#### 修改字典

`dict[key] = value`  相当于 Java 的 put 操作

```python
letters = {'a': 1, 'b': 2, 'c': 3}
letters['d'] = 4 #添加
letters['a'] = 0 #修改
print(letters) # {'a': 0, 'b': 2, 'c': 3, 'd': 4}
```

#### 删除字典

`del dict[key]`  删除字典的一个 key   

`del dict`  删除整个字典  

#### len()

`len(dict)`  得到字典的键的总数。  

### 字典的格式化字符串

```python
print('a的值是：%(a)s' % letters) #a的值是：0
```

### 字典和列表的区别

dict 的特点是：

1. 查找和插入快，不会随着 key  增加而变慢；
2. 需要占用大量内存。

list 的特点是：

1. 查找和插入的时间随着元素的增加而增加；
2. 占用空间小。

## 字典方法

### clear()

`dict.clear()`  

删除字典内的所有项。删除的是原字典的项而不是指向一个新的字典。  

  ```python
x = {}
y = x
x['key'] = 1
print(y) #{'key': 1}
x.clear()
# y所指向的字典的值被清空
print(y) #{}
x['key'] = 2
x = {}
# x指向了一个新的字典对象
print(y) #{'key': 2}
  ```

### copy()

`dict.copy()`  

返回一个具有相同键值对的新字典。  

这是一个浅复制，即值对象原地修改，复制出来的字典也会受影响。  

### fromkeys()

`dict.fromkeys(seq[,value])`  

创建一个新字典，以 seq 的值为字典的键，value 的值为字典所有键的初始值。默认字典的 value 都是 None。  

```python
student = ['a', 'b', 'c']
print(dict.fromkeys(student)) #{'a': None, 'b': None, 'c': None}
print(dict.fromkeys(student, 'default')) #{'a': 'default', 'b': 'default', 'c': 'default'}
```

### get()

`dict.get(key[, default=None])`  

返回指定键的值，如果值不在字典中，返回 default 值。default 值默认为 None。  

### in

`key in dict`  

返回一个 boolean 值，表示该字典中有没有这个 key。  







